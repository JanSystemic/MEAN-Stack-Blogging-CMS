!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("rxjs/BehaviorSubject"),require("rxjs/observable/from"),require("rxjs/add/operator/map"),require("rxjs/add/operator/take"),require("rxjs/add/operator/filter")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/BehaviorSubject","rxjs/observable/from","rxjs/add/operator/map","rxjs/add/operator/take","rxjs/add/operator/filter"],factory):factory((global.ng=global.ng||{},global.ng.ngxHighlightjs=global.ng.ngxHighlightjs||{}),global.ng.core,global.Rx,global.Rx)}(this,function(exports,_angular_core,rxjs_BehaviorSubject,rxjs_observable_from){"use strict";function HighlightFactory(options){return new HighlightService(options)}var OPTIONS=new _angular_core.InjectionToken("OPTIONS"),HighlightService=function(){function HighlightService(options){this.options={theme:"github",path:"assets/lib/hljs",auto:!0},this.ready$=new rxjs_BehaviorSubject.BehaviorSubject(!1),this.options=Object.assign({},this.options,options),this.loadScript(),this.loadTheme()}return HighlightService.prototype.loadScript=function(){var _this=this,script=document.createElement("script");script.async=!0,script.type="text/javascript",script.onload=function(){_this.ready$.next(!0)},script.src=this.options.path+"/highlight.pack.js",document.head.appendChild(script)},HighlightService.prototype.loadTheme=function(){var style=document.createElement("link");style.rel="stylesheet",style.type="text/css",style.href=this.options.path+"/styles/"+this.options.theme+".css",document.head.appendChild(style)},HighlightService}();HighlightService.decorators=[{type:_angular_core.Injectable}],HighlightService.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Optional},{type:_angular_core.Inject,args:[OPTIONS]}]}]};var HighlightDirective=function(){function HighlightDirective(el,renderer,hl){this.renderer=renderer,this.hl=hl,this.hljsClass=!0,this.el=el.nativeElement}return Object.defineProperty(HighlightDirective.prototype,"setCode",{set:function(code){var _this=this;this.code=code,this.hl.ready$.filter(function(ready){return ready}).take(1).subscribe(function(){return _this.highlightElement(_this.el,code)})},enumerable:!0,configurable:!0}),HighlightDirective.prototype.ngOnInit=function(){var _this=this;!this.code&&this.hl.options.auto&&this.hl.ready$.filter(function(ready){return ready}).take(1).subscribe(function(){_this.highlightTextContent(),_this.domObs=new MutationObserver(function(){return _this.highlightTextContent()}),_this.domObs.observe(_this.el,{childList:!0,subtree:!0})})},HighlightDirective.prototype.highlightTextContent=function(){this.highlight?"all"===this.highlight?this.highlightChildren(this.el,"pre code"):this.highlightChildren(this.el,this.highlight):"code"===this.el.tagName.toLowerCase()?this.highlightElement(this.el,this.el.innerText.trim()):console.warn("[HighlightDirective]: Use 'highlight' on <code> elements only")},HighlightDirective.prototype.highlightElement=function(el,code){var highlightedCode=hljs.highlightAuto(code).value;highlightedCode!==el.innerHTML&&this.renderer.setProperty(el,"innerHTML",highlightedCode)},HighlightDirective.prototype.highlightChildren=function(el,selector){var _this=this,codeElements=el.querySelectorAll(selector);rxjs_observable_from.from(codeElements).filter(function(code){return 1===code.childNodes.length&&"#text"===code.childNodes[0].nodeName}).map(function(codeElement){_this.highlightElement(codeElement,codeElement.innerText.trim())}).take(1).subscribe()},HighlightDirective.prototype.ngOnDestroy=function(){!this.code&&this.hl.options.auto&&this.domObs.disconnect()},HighlightDirective}();HighlightDirective.decorators=[{type:_angular_core.Directive,args:[{selector:"[highlight]"}]}],HighlightDirective.ctorParameters=function(){return[{type:_angular_core.ElementRef},{type:_angular_core.Renderer2},{type:HighlightService}]},HighlightDirective.propDecorators={highlight:[{type:_angular_core.Input}],setCode:[{type:_angular_core.Input,args:["code"]}],hljsClass:[{type:_angular_core.HostBinding,args:["class.hljs"]}]};var HighlightModule=function(){function HighlightModule(){}return HighlightModule.forRoot=function(options){return{ngModule:HighlightModule,providers:[{provide:OPTIONS,useValue:options},{provide:HighlightService,useFactory:HighlightFactory,deps:[OPTIONS]}]}},HighlightModule}();HighlightModule.decorators=[{type:_angular_core.NgModule,args:[{declarations:[HighlightDirective],exports:[HighlightDirective]}]}],HighlightModule.ctorParameters=function(){return[]},exports.HighlightModule=HighlightModule,exports.ɵb=HighlightDirective,exports.ɵa=HighlightFactory,exports.ɵd=HighlightService,exports.ɵc=OPTIONS,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-highlightjs.umd.min.js.map
